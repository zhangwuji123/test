INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1c93fb10000', '地点', 1, NULL, 'JF', 0);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1c959f60001', '面积', 1, NULL, 'JF', 1);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1c97c6b0002', '主要用途', 1, NULL, 'JF', 2);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1caee270003', '资产编号', 1, NULL, 'GD', 0);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1cb0d350004', '维保单位', 1, NULL, 'GD', 1);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1cb38df0005', '保修结束时间', 2, NULL, 'GD', 2);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1cb4ff20006', '序列号', 1, NULL, 'GD', 3);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1cb71570007', '制造商', 1, NULL, 'GD', 4);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1cb8ddf0008', '型号', 1, NULL, 'GD', 5);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1cbb0600009', '额定负荷', 1, NULL, 'GD', 6);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1cbfeb4000a', '所属逻辑组', 1, NULL, 'GD', 7);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1cc423e000b', '机房', 3, 'JF', 'GD', 8);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1d02b3d000c', '资产编号', 1, NULL, 'HK', 0);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1d059c4000d', '维保单位', 1, NULL, 'HK', 1);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1d09942000e', '保修i结束时间', 2, NULL, 'HK', 2);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1d0b193000f', '序列号', 1, NULL, 'HK', 3);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1d0cd910010', '制造商', 1, NULL, 'HK', 4);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1d0eaf90011', '型号', 1, NULL, 'HK', 5);
INSERT INTO `cm_type_attr` VALUES ('2c908c2b5fe1a368015fe1d10ddc0012', '机房', 3, 'JF', 'HK', 6);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece718ff0000', 'IP地址', 1, NULL, 'PHYSICAL_NETWORK', 0);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece74b7e0001', '网络类别', 1, NULL, 'PHYSICAL_NETWORK', 1);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece77d910002', '资产编号', 1, NULL, 'PHYSICAL_NETWORK', 2);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece7c0aa0003', '维保单位', 1, NULL, 'PHYSICAL_NETWORK', 3);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece88a6b0004', '保修结束时间', 2, NULL, 'PHYSICAL_NETWORK', 4);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece8d10f0005', '序列号', 1, NULL, 'PHYSICAL_NETWORK', 5);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece8f9a70006', '制造商', 1, NULL, 'PHYSICAL_NETWORK', 6);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece9212c0007', '型号', 1, NULL, 'PHYSICAL_NETWORK', 7);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece948d20008', 'IOS版本', 1, NULL, 'PHYSICAL_NETWORK', 8);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece973500009', '机柜编号', 1, NULL, 'PHYSICAL_NETWORK', 9);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece9b157000a', '机柜起始位置', 1, NULL, 'PHYSICAL_NETWORK', 10);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fece9ee58000b', '管理设备序列号', 1, NULL, 'PHYSICAL_NETWORK', 11);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecea2274000c', '机房', 3, 'JF', 'PHYSICAL_NETWORK', 12);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecec3301000d', 'IP地址', 1, NULL, 'FRONT', 0);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecec5b7f000e', '资产编号', 1, NULL, 'FRONT', 1);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecec8ecf000f', '维保单位', 1, NULL, 'FRONT', 2);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fececc2ad0010', '保修结束时间', 1, NULL, 'FRONT', 3);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fececeb4a0011', '序列号', 1, NULL, 'FRONT', 4);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015feced14280012', '制造商', 1, NULL, 'FRONT', 5);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015feced50ec0013', '型号', 1, NULL, 'FRONT', 6);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015feced885a0014', '微码版本', 1, NULL, 'FRONT', 7);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecedb4920015', '机柜编号', 1, NULL, 'FRONT', 8);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015feceded0b0016', '机柜起始位置', 1, NULL, 'FRONT', 9);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecefba910017', '机房', 3, 'JF', 'FRONT', 10);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf022890018', '物理网络设备', 3, 'PHYSICAL_NETWORK', 'FRONT', 11);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf15ed60019', 'IP地址', 1, NULL, 'STORAGE', 0);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf18b3a001a', '资产编号', 1, NULL, 'STORAGE', 1);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf54fc7001b', '序列号', 1, NULL, 'STORAGE', 2);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf57c2c001c', '维保单位', 1, NULL, 'STORAGE', 3);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf5b53d001d', '保修结束时间', 2, NULL, 'STORAGE', 4);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf5e297001e', '制造商', 1, NULL, 'STORAGE', 5);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf6126d001f', '型号', 1, NULL, 'STORAGE', 6);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf64a530020', '微码版本', 1, NULL, 'STORAGE', 7);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf6856d0021', '机柜编号', 1, NULL, 'STORAGE', 8);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf6c39d0022', '机柜起始位置', 1, NULL, 'STORAGE', 9);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf71af30023', '机房', 3, 'JF', 'STORAGE', 10);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf7b83c0024', 'IP地址', 1, NULL, 'PHYSICAL_SERVER', 0);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf7ef5b0025', '资产编号', 1, NULL, 'PHYSICAL_SERVER', 1);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf80fe90026', '维保单位', 1, NULL, 'PHYSICAL_SERVER', 2);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf845200027', '保修结束时间', 2, NULL, 'PHYSICAL_SERVER', 3);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf889cf0028', '制造商', 1, NULL, 'PHYSICAL_SERVER', 4);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf8a7d90029', '型号', 1, NULL, 'PHYSICAL_SERVER', 5);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf95056002a', '微码版本', 1, NULL, 'PHYSICAL_SERVER', 6);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf969fd002b', 'CPU', 1, NULL, 'PHYSICAL_SERVER', 7);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf98abc002c', '内存', 1, NULL, 'PHYSICAL_SERVER', 8);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecf9ae82002d', '机柜编号', 1, NULL, 'PHYSICAL_SERVER', 9);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfa0689002e', '机柜起始位置', 1, NULL, 'PHYSICAL_SERVER', 10);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfa296f002f', '机房', 3, 'JF', 'PHYSICAL_SERVER', 11);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfa5b420030', '物理网络设备', 3, 'PHYSICAL_NETWORK', 'PHYSICAL_SERVER', 12);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfb09050031', 'IP地址', 1, NULL, 'HOST_CLUSTER', 0);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfb30c00032', '分配存储', 1, NULL, 'HOST_CLUSTER', 1);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfb62df0033', '服务网段', 1, NULL, 'HOST_CLUSTER', 2);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfba9990034', '存储类设备', 4, 'STORAGE', 'HOST_CLUSTER', 3);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfbdd8c0035', '物理服务器', 4, 'PHYSICAL_SERVER', 'HOST_CLUSTER', 4);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfc55020036', 'IP地址', 1, NULL, 'LOGIC_SERVER', 0);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfc84500037', '操作系统版本', 1, NULL, 'LOGIC_SERVER', 1);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfceaee0038', '操作系统补丁基线', 1, NULL, 'LOGIC_SERVER', 2);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfd10bc0039', '数据库版本', 1, NULL, 'LOGIC_SERVER', 3);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfd3727003a', '中间件版本', 1, NULL, 'LOGIC_SERVER', 4);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfd6239003b', '分配逻辑CPU', 1, NULL, 'LOGIC_SERVER', 5);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfdd15c003c', '分配内存GB', 1, NULL, 'LOGIC_SERVER', 6);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfe29ba003d', '分配存储GB', 1, NULL, 'LOGIC_SERVER', 7);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecfeb277003e', '分配NAS（GB）', 1, NULL, 'LOGIC_SERVER', 8);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecff06a0003f', '分配SAN（GB）', 1, NULL, 'LOGIC_SERVER', 9);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecffa36f0040', '应用系统', 4, 'APPLICATION', 'LOGIC_SERVER', 10);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fecffdd240041', '存储类设备', 4, 'STORAGE', 'LOGIC_SERVER', 11);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fed0026020042', '前端设备', 4, 'FRONT', 'LOGIC_SERVER', 12);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fece59a015fed0061030043', '物理网络设备', 4, 'PHYSICAL_NETWORK', 'LOGIC_SERVER', 13);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fed2eae015fed30eb9e0000', '系统类型', 1, NULL, 'APPLICATION', 0);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fed2eae015fed3125ed0001', '应用版本', 1, NULL, 'APPLICATION', 1);
INSERT INTO `cm_type_attr` VALUES ('402899aa5fed2eae015fed317f470002', '逻辑服务器', 4, 'LOGIC_SERVER', 'APPLICATION', 2);
ALTER TABLE `ci_log`
ADD COLUMN `cm_type`  varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '北分配置关联类型' AFTER `create_time`;






CREATE TABLE `alert_rules` (
  `uuid` varchar(128) NOT NULL,
  `name` varchar(64) CHARACTER SET utf8 DEFAULT NULL COMMENT '名称',
  `resource_type` varchar(4) DEFAULT NULL COMMENT '1hyperV共享存储',
  `state` int(4) DEFAULT NULL COMMENT '状态：1正常，2启用，3停用，4已删除',
  `create_time` datetime DEFAULT NULL,
  PRIMARY KEY (`uuid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `alert_resource_relation` (
  `uuid` varchar(128) NOT NULL,
  `alert_rules_uuid` varchar(128) DEFAULT NULL,
  `resource_uuid` varchar(128) DEFAULT NULL,
  `resource_type` varchar(4) DEFAULT NULL,
  PRIMARY KEY (`uuid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `alert_rules_item` (
  `uuid` varchar(128) NOT NULL,
  `alert_quota_uuid` varchar(128) DEFAULT NULL,
  `conditions` int(11) DEFAULT NULL COMMENT '条件：1大于等于，2小于等于',
  `value` double DEFAULT NULL COMMENT '阈值',
  `alert_rules_uuid` varchar(128) DEFAULT NULL,
  PRIMARY KEY (`uuid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `alert_rules_quota` (
  `uuid` varchar(128) NOT NULL,
  `name` varchar(64) DEFAULT NULL,
  `resource_type` int(4) DEFAULT NULL COMMENT '1hyperV共享存储',
  `monitor_time_rules` varchar(64) DEFAULT NULL COMMENT '检测时间规则',
  `rules` varchar(128) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  PRIMARY KEY (`uuid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


INSERT INTO `alert_rules_quota` (`uuid`, `name`, `resource_type`, `monitor_time_rules`, `rules`, `create_time`) VALUES ('1', '共享存储余量百分比', '1', '0/10 * * * * ? *', '(diskTotal-diskUsage)/diskTotal', '2017-11-24 11:39:13');
INSERT INTO `alert_rules_quota` (`uuid`, `name`, `resource_type`, `monitor_time_rules`, `rules`, `create_time`) VALUES ('2', '共享存储使用量百分比', '1', '0/10 * * * * ? *', 'diskUsage/diskTotal', '2017-11-24 11:40:30');
INSERT INTO `alert_rules_quota` (`uuid`, `name`, `resource_type`, `monitor_time_rules`, `rules`, `create_time`) VALUES ('3', '日增量和剩余量百分比', '1', '0 10 0 ? * *', 'DZ_diskUsage/(diskTotal-diskUsage)', '2017-11-24 13:21:29');

INSERT INTO `sys_module` (`uuid`, `visible`, `description`, `name`, `priority`, `url`, `parent_uuid`, `sn`) VALUES ('105', '1', NULL, '存储告警规则', '99', '/storageAlertRules', NULL, 'storageAlertRules');


INSERT INTO `sysconfig` (`uuid`, `visible`, `module_name`, `param_name`, `value`) VALUES ('48', '1', '告警提示最大次数', 'alert_max_count', '10');
INSERT INTO `sysconfig` (`uuid`, `visible`, `module_name`, `param_name`, `value`) VALUES ('49', '1', '告警提示时间最小间隔增量(毫秒)', 'alert_time_interval_increment', '120000');
INSERT INTO `sysconfig` (`uuid`, `visible`, `module_name`, `param_name`, `value`) VALUES ('50', '1', '告警提示任务时间规则', 'alert_prompt_job_time_rules', '* 0/1 * * * ? *');

ALTER TABLE `alert`
MODIFY COLUMN `rule_uuid`  varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL AFTER `uuid`;

